<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Book hotels, restaurants, car rentals, and events across Saudi Arabia with Saudi Guider."
    />
    <title>Our Services - Saudi Guider</title>
    <link rel="icon" type="image/x-icon" href="./images/S_NoBack_500x500.png" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <!-- Removed common.css reference since it's causing 404 -->
    <script src="./js/shared.js" defer></script>
    <script src="./js/loadCommon.js" defer></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      :root {
        --primary: #5b6a7f;
        --secondary: #8fb6c0;
        --secondary-dark: #4c8ba9;
        --light: #f0f0f0;
        --dark: #212121;
        --dark-gray: #2a2a2a;
        --darker-gray: #1a1a1a;
        --medium-gray: #3a3a3a;
        --border-gray: #3a3a3a;
        --font-main: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        --transition-speed: 0.3s;
        --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
        --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        --feature-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      /* CSS Reset */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        scroll-behavior: smooth;
      }

      /* Base Styles */
      body {
        font-family: var(--font-main);
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: var(--light);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      main {
        flex: 1;
        padding-top: 6rem;
      }

      img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      /* Typography */
      h1,
      h2,
      h3 {
        line-height: 1.2;
        margin-bottom: 0.5em;
      }

      h1 {
        font-size: 2.5rem;
      }

      h2 {
        font-size: 2rem;
      }

      h3 {
        font-size: 1.5rem;
      }

      p {
        margin-bottom: 1rem;
      }

      /* Focus States */
      a:focus,
      button:focus,
      input:focus,
      select:focus {
        outline: 2px solid var(--light);
        outline-offset: 2px;
      }

      /* Header */
      header {
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        color: var(--light);
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        box-shadow: var(--box-shadow);
      }

      .logo {
        display: flex;
        align-items: center;
      }

      .logo img {
        width: 60px;
        margin-right: 10px;
      }

      .logo a {
        font-size: 1.75rem;
        font-weight: bold;
        text-decoration: none;
        color: var(--light);
      }

      /* Navigation */
      nav ul {
        display: flex;
        gap: 1.5rem;
        list-style: none;
      }

      nav a {
        color: var(--light);
        text-decoration: none;
        font-size: 1.1rem;
        transition: color var(--transition-speed) ease;
        padding: 0.5rem;
      }

      nav a:hover,
      nav a:focus {
        color: #ffffff;
      }

      nav a.active {
        border-bottom: 2px solid #ffffff;
        padding-bottom: 3px;
      }

      /* Auth Buttons */
      .auth-buttons {
        display: flex;
        gap: 15px;
      }
      .user-dropdown {
        position: relative;
        display: none;
      }

      .user-toggle {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 0.5rem 1rem;
      }

      .dropdown-menu {
        display: none;
        position: absolute;
        right: 0;
        background-color: var(--dark-gray);
        min-width: 200px;
        box-shadow: var(--box-shadow);
        border-radius: 6px;
        z-index: 1001;
        padding: 0.5rem 0;
      }

      .dropdown-menu a {
        color: var(--light);
        padding: 0.75rem 1rem;
        text-decoration: none;
        display: block;
      }

      .dropdown-menu a:hover {
        background-color: var(--medium-gray);
      }

      .user-dropdown:hover .dropdown-menu {
        display: block;
      }

      .auth-buttons button {
        background-color: #69a7c8;
        border: none;
        color: var(--light);
        padding: 0.5rem 1rem;
        border-radius: 5px;
        font-size: 1rem;
        cursor: pointer;
        text-decoration: none;
        transition: background-color var(--transition-speed) ease;
      }

      .auth-buttons button:hover,
      .auth-buttons button:focus {
        background-color: #4c8ba9;
      }

      /* Mobile Nav Toggle */
      .mobile-nav-toggle {
        display: none;
        background: transparent;
        border: none;
        color: var(--light);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.5rem;
      }

      #results-container .view-result-btn {
        display: none !important;
      }

      /* Hero Section */
      .services-hero {
        padding: 4rem 2rem;
        background-color: var(--dark);
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .services-hero h1 {
        margin-bottom: 0.5rem;
      }

      .services-hero p {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        max-width: 800px;
      }

      /* Sections */
      .section {
        padding: 3rem 2rem;
      }

      .section-title {
        text-align: center;
        margin-bottom: 2rem;
      }

      .section-text {
        max-width: 800px;
        margin: 0 auto 2rem;
        text-align: center;
      }

      /* Search Section */
      .search-section {
        background-color: var(--dark-gray);
      }

      .search-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .search-tabs {
        display: flex;
        border-bottom: 1px solid var(--border-gray);
      }

      .search-tab {
        padding: 1rem 1.5rem;
        background: var(--medium-gray);
        border: none;
        cursor: pointer;
        color: var(--light);
        font-size: 1.1rem;
        transition: background-color var(--transition-speed);
      }

      .search-tab:first-child {
        border-top-left-radius: 8px;
      }

      .search-tab:last-child {
        border-top-right-radius: 8px;
      }

      .search-tab.active {
        background: var(--secondary);
      }

      .search-tab:hover {
        background: var(--secondary-dark);
      }

      .search-form {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        padding: 1.5rem;
        background: var(--medium-gray);
        border-radius: 0 8px 8px 8px;
      }

      .form-group {
        flex: 1;
        min-width: 200px;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 0.8rem;
        border: 1px solid var(--border-gray);
        border-radius: 4px;
        background-color: var(--dark);
        color: var(--light);
        font-family: inherit;
        font-size: inherit;
      }

      .search-button {
        background-color: var(--secondary);
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color var(--transition-speed);
        align-self: flex-end;
      }

      .search-button:hover {
        background-color: var(--secondary-dark);
      }

      /* Search Results */
      .search-results {
        display: none;
        background-color: var(--medium-gray);
        border-radius: 8px;
        padding: 2rem;
        margin-top: 1rem;
      }

      .search-results.active {
        display: block;
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 1.5rem;
      }

      .result-item {
        background-color: var(--dark);
        border-radius: 8px;
        padding: 1rem;
        transition: transform var(--transition-speed);
        position: relative;
      }

      .result-item:hover {
        transform: translateY(-5px);
      }

      .result-image {
        height: 180px;
        overflow: hidden;
        border-radius: 6px;
        margin-bottom: 1rem;
        position: relative;
      }

      .result-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform var(--transition-speed);
      }

      .result-item:hover .result-image img {
        transform: scale(1.05);
      }

      .result-rating {
        color: #ffd700;
        margin: 0.5rem 0;
      }

      .result-price {
        font-weight: bold;
        color: var(--secondary);
        margin: 0.5rem 0;
      }

      .result-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .result-button {
        padding: 0.7rem 1rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all var(--transition-speed);
        flex: 1;
        text-align: center;
        font-weight: 600;
      }

      .result-button.view-result-btn {
        background-color: var(--dark);
        color: var(--light);
        border: 1px solid var(--secondary);
      }

      .result-button.view-result-btn:hover {
        background-color: var(--border-gray);
      }

      .result-button.book-result-btn {
        background-color: var(--secondary);
        color: white;
      }

      .result-button.book-result-btn:hover {
        background-color: var(--secondary-dark);
      }

      .no-results-message {
        text-align: center;
        padding: 2rem;
        color: var(--light);
        background: var(--medium-gray);
        border-radius: 8px;
        margin: 1rem 0;
      }

      .no-results-message i {
        font-size: 3rem;
        color: var(--secondary);
        margin-bottom: 1rem;
      }

      .no-results-message h4 {
        margin-bottom: 0.5rem;
      }

      .no-results-message p {
        opacity: 0.8;
      }
      .section-flex {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 50px;
      }
      .Aibutton {
        padding: 0.7rem 1rem;
        background-color: var(--secondary);
        color: white;
        border-radius: 15px;
        margin-bottom: 20px;
        text-decoration: none;
      }
      .Aibutton:hover {
        cursor: pointer;
        background-color: var(--secondary-dark);
        transition: background-color var(--transition-speed);
      }

      /* Search form enhancements */
      .sort-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border-gray);
      }

      .sort-options {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .sort-options select {
        padding: 0.5rem;
        background-color: var(--dark);
        color: var(--light);
        border: 1px solid var(--border-gray);
        border-radius: 4px;
      }

      .results-count {
        color: var(--secondary);
        font-weight: 600;
      }

      /* Amenities tags */
      .amenities {
        display: flex;
        gap: 0.5rem;
        margin: 0.5rem 0;
        flex-wrap: wrap;
      }

      .amenity-tag {
        background-color: var(--secondary-dark);
        color: white;
        padding: 0.3rem 0.6rem;
        border-radius: 12px;
        font-size: 0.8rem;
      }

      /* Featured badge */
      .featured-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: var(--secondary);
        color: white;
        padding: 0.3rem 0.6rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      /* Multi-select styling */
      select[multiple] {
        height: auto;
        min-height: 100px;
      }

      select[multiple] option {
        padding: 0.5rem;
        margin: 0.2rem 0;
        background-color: var(--dark);
        color: var(--light);
      }

      select[multiple] option:checked {
        background-color: var(--secondary);
        color: white;
      }

      /* Trip cards for AI results */
      .trip-card {
        background-color: #3a3a3a;
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        color: white;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      }

      .trip-card h3 {
        margin-bottom: 0.5rem;
      }

      .trip-card button {
        margin-top: 1rem;
        background: #8fb6c0;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        color: white;
        cursor: pointer;
      }
      .trip-card button:hover {
        background: #4c8ba9;
      }

      /* AI Assistant */
      .ai-assistant {
        background-color: var(--darker-gray);
        padding: 3rem 2rem;
      }

      .ai-container {
        max-width: 1000px;
        margin: 0 auto;
        background-color: var(--medium-gray);
        border-radius: 10px;
        padding: 2rem;
        box-shadow: var(--card-shadow);
      }

      .ai-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      .ai-icon {
        font-size: 2.5rem;
        color: var(--secondary);
        margin-right: 1rem;
      }

      .ai-content {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .ai-input {
        display: flex;
        gap: 1rem;
      }

      .ai-input textarea {
        flex: 1;
        min-height: 100px;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid var(--border-gray);
        background-color: var(--dark);
        color: var(--light);
        resize: vertical;
        font-family: inherit;
        font-size: inherit;
      }

      .ai-submit {
        background-color: var(--secondary);
        color: white;
        border: none;
        padding: 0 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color var(--transition-speed);
      }

      .ai-submit:hover {
        background-color: var(--secondary-dark);
      }

      .ai-example-prompts {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .example-prompt {
        background-color: var(--dark);
        color: var(--light);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background-color var(--transition-speed);
      }

      .example-prompt:hover {
        background-color: var(--secondary);
      }

      /* AI Results */
      .ai-results {
        display: none;
        background-color: var(--dark);
        border-radius: 8px;
        padding: 1.5rem;
        margin-top: 1rem;
      }

      .ai-results.active {
        display: block;
      }

      .ai-loading {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
      }

      .ai-loading i {
        font-size: 2rem;
        color: var(--secondary);
        animation: spin 1s linear infinite;
      }

      .ai-response {
        line-height: 1.6;
      }

      .ai-response h3 {
        color: var(--secondary);
        margin-bottom: 1rem;
      }

      .ai-response ul {
        margin-left: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .ai-response li {
        margin-bottom: 0.5rem;
      }

      .ai-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .ai-action-btn {
        padding: 0.7rem 1.5rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        transition: all var(--transition-speed);
        text-align: center;
      }

      .ai-action-btn.primary {
        background-color: var(--secondary);
        color: white;
      }

      .ai-action-btn.primary:hover {
        background-color: var(--secondary-dark);
      }

      .ai-action-btn.secondary {
        background-color: var(--dark);
        color: var(--light);
        border: 1px solid var(--secondary);
      }

      .ai-action-btn.secondary:hover {
        background-color: var(--border-gray);
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Map Container */
      .map-container {
        width: 100%;
        height: 300px;
        background-color: var(--dark);
        border-radius: 8px;
        margin-top: 1.5rem;
        overflow: hidden;
      }

      .map-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--dark);
        color: var(--light);
      }

      /* Service Categories */
      .service-categories {
        background-color: var(--dark-gray);
      }

      .category-container {
        max-width: 1500px;
        margin: 0 auto;
      }

      /* Service Cards */
      .service-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
        gap: 2rem;
        justify-content: center;
      }

      .service-card {
        background-color: var(--medium-gray);
        border-radius: 10px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: transform var(--transition-speed);
      }

      .service-card:hover {
        transform: translateY(-5px);
      }

      .service-card-image {
        height: 200px;
        overflow: hidden;
      }

      .service-card-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform var(--transition-speed);
      }

      .service-card:hover .service-card-image img {
        transform: scale(1.05);
      }

      .service-card-content {
        padding: 1.5rem;
      }

      .service-card-title {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
      }

      .service-price {
        color: var(--secondary);
        font-weight: bold;
        font-size: 1.1rem;
        padding-left: 10px;
      }

      .service-features {
        list-style: none;
        margin: 1rem 0;
      }

      .service-features li {
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
      }

      .service-features i {
        color: var(--secondary);
        margin-right: 0.5rem;
        min-width: 20px;
        text-align: center;
      }

      .service-card-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .view-details-btn,
      .book-now-btn {
        padding: 0.7rem 1rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        text-align: center;
        flex: 1;
        transition: all var(--transition-speed);
      }

      .view-details-btn {
        background-color: var(--dark);
        color: var(--light);
      }

      .view-details-btn:hover {
        background-color: var(--border-gray);
      }

      .book-now-btn {
        background-color: var(--secondary);
        color: white;
      }

      .book-now-btn:hover {
        background-color: var(--secondary-dark);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        overflow: auto;
        justify-content: center;
        align-items: center;
        padding: 2rem;
      }

      .modal-content {
        background-color: var(--dark-gray);
        border-radius: 10px;
        max-width: 800px;
        width: 90%;
        position: relative;
        animation: modalFadeIn 0.3s;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--border-gray);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        margin: 0;
      }

      .close-modal {
        background: transparent;
        border: none;
        color: var(--light);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.5rem;
      }

      .modal-body {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .modal-image-gallery {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
        overflow-x: auto;
        padding-bottom: 1rem;
      }

      .modal-image-gallery img {
        width: 150px;
        height: 100px;
        object-fit: cover;
        border-radius: 5px;
        cursor: pointer;
        transition: all var(--transition-speed);
      }

      .modal-image-gallery img:hover {
        transform: scale(1.05);
      }

      .modal-details {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
      }

      .modal-info {
        flex: 1;
        min-width: 300px;
      }

      .modal-features {
        flex: 1;
        min-width: 300px;
      }

      .detail-list {
        list-style: none;
      }

      .detail-list li {
        margin-bottom: 0.8rem;
        display: flex;
        align-items: flex-start;
      }

      .detail-list i {
        color: var(--secondary);
        margin-right: 0.5rem;
        min-width: 20px;
        text-align: center;
      }

      .modal-footer {
        padding: 1.5rem;
        border-top: 1px solid var(--border-gray);
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
      }

      .modal-footer button {
        background-color: var(--secondary);
        color: white;
        padding: 0.7rem 1rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        text-align: center;
        transition: background-color var(--transition-speed);
      }

      .modal-footer button:hover {
        background-color: var(--secondary-dark);
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 1.5rem;
        background-color: var(--dark);
        color: var(--light);
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 1.5rem;
        text-align: left;
        max-width: 1200px;
        margin: 0 auto;
      }

      .footer-section h3 {
        margin-bottom: 1rem;
        color: var(--secondary);
      }

      .footer-section ul {
        list-style: none;
      }

      .footer-section ul li {
        margin-bottom: 0.5rem;
      }

      .footer-section a {
        color: var(--light);
        text-decoration: none;
        transition: color var(--transition-speed);
      }

      .footer-section a:hover,
      .footer-section a:focus {
        color: var(--secondary);
        text-decoration: underline;
      }

      .social-icons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .social-icons a {
        color: var(--light);
        font-size: 1.5rem;
        transition: color var(--transition-speed);
      }

      .social-icons a:hover,
      .social-icons a:focus {
        color: var(--secondary);
      }

      .footer-bottom {
        border-top: 1px solid var(--border-gray);
        padding-top: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Login Message Styling */
      .login-message {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 3000;
      }

      .login-message-content {
        background-color: var(--dark-gray);
        padding: 2rem;
        border-radius: 8px;
        text-align: center;
        max-width: 400px;
        width: 90%;
      }

      .login-message p {
        margin-bottom: 1.5rem;
        font-size: 1.1rem;
      }

      .login-redirect-btn {
        background-color: var(--secondary);
        color: white;
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color var(--transition-speed);
      }

      .login-redirect-btn:hover {
        background-color: var(--secondary-dark);
      }

      /* Coming Soon Message */
      .coming-soon-message {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--secondary);
        color: white;
        padding: 1rem 2rem;
        border-radius: 5px;
        z-index: 3000;
        animation: fadeInOut 3s ease-in-out;
      }

      @keyframes fadeInOut {
        0% {
          opacity: 0;
        }
        20% {
          opacity: 1;
        }
        80% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      /* Booking Success Modal */
      .booking-success-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 3000;
      }

      .booking-success-modal .modal-content {
        background-color: var(--dark-gray);
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        max-width: 500px;
        width: 90%;
      }

      .booking-success-modal i {
        font-size: 4rem;
        color: #4CAF50;
        margin-bottom: 1rem;
      }

      .booking-success-modal h3 {
        margin-bottom: 1rem;
      }

      .booking-success-modal p {
        margin-bottom: 2rem;
      }

      .modal-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
      }

      .modal-actions button {
        padding: 0.8rem 1.5rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        font-size: 1rem;
        transition: all 0.3s;
      }

      .modal-actions button:first-child {
        background-color: var(--secondary);
        color: white;
      }

      .modal-actions button:first-child:hover {
        background-color: var(--secondary-dark);
      }

      .modal-actions button:last-child {
        background-color: var(--dark);
        color: var(--light);
        border: 1px solid var(--secondary);
      }

      .modal-actions button:last-child:hover {
        background-color: var(--border-gray);
      }

      /* Loading Spinner */
      .loading-spinner {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
      }

      .loading-spinner i {
        font-size: 2rem;
        color: var(--secondary);
        animation: spin 1s linear infinite;
      }

      /* Error Message */
      .error-message {
        text-align: center;
        padding: 2rem;
        color: var(--light);
      }

      .error-message i {
        font-size: 3rem;
        color: #ff5252;
        margin-bottom: 1rem;
      }

      /* Responsive Design */
      @media (max-width: 992px) {
        .service-cards {
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }
      }

      @media (max-width: 768px) {
        header {
          padding: 1rem;
        }

        .mobile-nav-toggle {
          display: block;
        }

        nav {
          position: fixed;
          top: 80px;
          left: -100%;
          width: 100%;
          background-color: var(--dark);
          height: calc(100vh - 80px);
          transition: left var(--transition-speed) ease;
          z-index: 999;
          padding: 2rem;
        }

        nav.active {
          left: 0;
        }

        nav ul {
          flex-direction: column;
          align-items: center;
        }

        .auth-buttons {
          margin-right: 1rem;
        }

        .section {
          padding: 2rem 1rem;
        }

        .services-hero {
          padding: 3rem 1rem;
        }

        .services-hero h1 {
          font-size: 2rem;
        }

        .search-tabs {
          overflow-x: auto;
          width: 100%;
          padding-bottom: 0.5rem;
        }

        .search-tab {
          white-space: nowrap;
          padding: 0.8rem 1rem;
        }

        .modal-content {
          width: 95%;
        }

        .modal-image-gallery img {
          width: 120px;
          height: 80px;
        }

        .ai-input {
          flex-direction: column;
        }

        .ai-submit {
          padding: 0.8rem;
          width: 100%;
        }

        .modal-actions {
          flex-direction: column;
        }

        .modal-actions button {
          width: 100%;
        }
      }

      @media (max-width: 480px) {
        .logo a {
          font-size: 1.5rem;
        }

        .logo img {
          width: 40px;
        }

        .auth-button {
          padding: 0.4rem 0.8rem;
          font-size: 0.9rem;
        }

        .services-hero h1 {
          font-size: 1.8rem;
        }

        .section-title {
          font-size: 1.8rem;
        }

        .search-form {
          padding: 1rem;
        }

        .ai-header {
          flex-direction: column;
          text-align: center;
        }

        .ai-icon {
          margin-right: 0;
          margin-bottom: 1rem;
        }

        .service-card {
          width: 100%;
        }

        .ai-actions {
          flex-direction: column;
        }

        .result-actions {
          flex-direction: column;
        }

        .result-button {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo">
        <img
          src="./images/S_NoBack_500x500.png"
          alt="Saudi Guider logo"
          width="60"
          height="60"
          loading="lazy"
        />
        <a href="index.html" aria-label="Go to Saudi Guider Home"
          >Saudi Guider</a
        >
      </div>

      <button
        class="mobile-nav-toggle"
        aria-label="Toggle navigation menu"
        aria-expanded="false"
        aria-controls="main-nav"
      >
        <i class="fas fa-bars"></i>
      </button>

      <nav id="main-nav" aria-label="Main navigation">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li>
            <a href="services.html" class="active" aria-current="page"
              >Services</a
            >
          </li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>

      <div class="auth-buttons">
        <button onclick="window.location.href='login.html'" aria-label="Log in">
          <i class="fas fa-sign-in-alt"></i> Log In
        </button>
        <button onclick="window.location.href='signup.html'" aria-label="Sign up">
          <i class="fas fa-user-plus"></i> Sign Up
        </button>
      </div>

      <div class="user-dropdown" id="userDropdown" style="display: none;">
        <button class="user-toggle">
          <span id="usernameDisplay"></span>
          <i class="fas fa-caret-down"></i>
        </button>
        <div class="dropdown-menu">
          <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
          <a href="reservations.html"><i class="fas fa-calendar-check"></i> Reservations</a>
          <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Log Out</a>
        </div>
      </div>
    </header>

    <main id="main-content">
      <section class="services-hero" aria-labelledby="services-title">
        <h1 id="services-title">Our Services</h1>
        <p>
          Discover and book the best hotels, restaurants, car rentals, and
          events throughout Saudi Arabia with personalized recommendations.
        </p>
      </section>

      <section
        class="service-categories section"
        aria-labelledby="categories-title"
      >
        <h2 id="categories-title" class="section-title">Featured Services</h2>
        <p class="section-text">
          Explore our most popular services for your Saudi Arabian adventure.
        </p>

        <div class="category-container">
          <div class="service-cards">
            <!-- Hotel Card -->
            <div class="service-card">
              <div class="service-card-image">
                <img
                  src="./images/hotel-exterior.jpg"
                  alt="Luxury Hotel Room"
                  loading="lazy"
                />
              </div>
              <div class="service-card-content">
                <div class="service-card-title">
                  <h3>Luxury Hotel Bookings</h3>
                  <span class="service-price">From $150/night</span>
                </div>
                <p>
                  Book premium hotels across Saudi Arabia with exclusive deals
                  and benefits for Saudi Guider members.
                </p>
                <ul class="service-features">
                  <li>
                    <i class="fas fa-check"></i> Access to 500+ premium hotels
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Exclusive rates and room
                    upgrades
                  </li>
                  <li>
                    <i class="fas fa-check"></i> 24/7 support for all bookings
                  </li>
                </ul>
                <div class="service-card-actions">
                  <button
                    class="view-details-btn"
                    data-service="hotel"
                    aria-label="View details for luxury hotel bookings"
                  >
                    View Details
                  </button>
                  <button
                    class="book-now-btn"
                    aria-label="Book a luxury hotel now"
                  >
                    Book Now
                  </button>
                </div>
              </div>
            </div>

            <!-- Car Rental Card -->
            <div class="service-card">
              <div class="service-card-image">
                <img
                  src="./images/Rent-Luxury-Cars-in-Dubai-1-scaled.jpg"
                  alt="Luxury SUV Rental"
                  loading="lazy"
                />
              </div>
              <div class="service-card-content">
                <div class="service-card-title">
                  <h3>Premium Car Rentals</h3>
                  <span class="service-price">From $75/day</span>
                </div>
                <p>
                  Choose from our fleet of well-maintained vehicles for
                  exploring Saudi Arabia with comfort and convenience.
                </p>
                <ul class="service-features">
                  <li>
                    <i class="fas fa-check"></i> Wide range of vehicles from
                    economy to luxury
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Flexible pickup and drop-off
                    locations
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Comprehensive insurance
                    included
                  </li>
                </ul>
                <div class="service-card-actions">
                  <button
                    class="view-details-btn"
                    data-service="car"
                    aria-label="View details for premium car rentals"
                  >
                    View Details
                  </button>
                  <button class="book-now-btn" aria-label="Rent a car now">
                    Rent Now
                  </button>
                </div>
              </div>
            </div>

            <!-- Restaurant Card -->
            <div class="service-card">
              <div class="service-card-image">
                <img
                  src="./images/reyhana.jpg"
                  alt="Fine Dining Restaurant"
                  loading="lazy"
                />
              </div>
              <div class="service-card-content">
                <div class="service-card-title">
                  <h3>Restaurant Reservations</h3>
                  <span class="service-price">All price ranges</span>
                </div>
                <p>
                  Discover and book the finest dining experiences from
                  traditional Saudi cuisine to international favorites.
                </p>
                <ul class="service-features">
                  <li>
                    <i class="fas fa-check"></i> Access to exclusive restaurants
                    and private dining
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Special Saudi Guider menu
                    options at select venues
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Dietary preferences
                    accommodated
                  </li>
                </ul>
                <div class="service-card-actions">
                  <button
                    class="view-details-btn"
                    data-service="restaurant"
                    aria-label="View details for restaurant reservations"
                  >
                    View Details
                  </button>
                  <button
                    class="book-now-btn"
                    aria-label="Book a restaurant now"
                  >
                    Reserve Now
                  </button>
                </div>
              </div>
            </div>

            <!-- Event Card -->
            <div class="service-card">
              <div class="service-card-image">
                <img
                  src="./images/2-your-ultimate-guide-to-riyadh-season-2023.jpg"
                  alt="Cultural Festival Event"
                  loading="lazy"
                />
              </div>
              <div class="service-card-content">
                <div class="service-card-title">
                  <h3>Cultural & Entertainment Events</h3>
                  <span class="service-price">From $25/ticket</span>
                </div>
                <p>
                  Get tickets for the most popular cultural festivals, concerts,
                  sports events, and exhibitions across Saudi Arabia.
                </p>
                <ul class="service-features">
                  <li>
                    <i class="fas fa-check"></i> Priority access to sold-out
                    events
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Exclusive Saudi Guider member
                    discounts
                  </li>
                  <li>
                    <i class="fas fa-check"></i> Group booking options available
                  </li>
                </ul>
                <div class="service-card-actions">
                  <button
                    class="view-details-btn"
                    data-service="event"
                    aria-label="View details for cultural and entertainment events"
                  >
                    View Details
                  </button>
                  <button
                    class="book-now-btn"
                    aria-label="Book event tickets now"
                  >
                    Get Tickets
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section
        class="search-section section"
        aria-labelledby="search-section-title"
      >
        <div class="section-flex">
          <h2 id="search-section-title" class="section-title">
            Find What You Need
          </h2>
          <a href="#ai" class="Aibutton">Use Our AI</a>
        </div>
        <p class="section-text">
          Use our traditional search tools to find exactly what you're looking
          for based on your preferences.
        </p>

        <div class="search-container">
          <div class="search-tabs" role="tablist">
            <button
              class="search-tab active"
              data-tab="hotels"
              role="tab"
              aria-selected="true"
              aria-controls="hotel-search"
            >
              <i class="fas fa-hotel"></i> Hotels
            </button>
            <button
              class="search-tab"
              data-tab="restaurants"
              role="tab"
              aria-selected="false"
              aria-controls="restaurant-search"
            >
              <i class="fas fa-utensils"></i> Restaurants
            </button>
            <button
              class="search-tab"
              data-tab="cars"
              role="tab"
              aria-selected="false"
              aria-controls="car-search"
            >
              <i class="fas fa-car"></i> Car Rentals
            </button>
            <button
              class="search-tab"
              data-tab="events"
              role="tab"
              aria-selected="false"
              aria-controls="event-search"
            >
              <i class="fas fa-ticket-alt"></i> Events
            </button>
          </div>

          <form
            class="search-form"
            id="hotel-search"
            role="tabpanel"
            aria-labelledby="hotels"
          >
            <div class="form-group">
              <label for="destination">Destination</label>
              <input
                type="text"
                id="destination"
                placeholder="City or region"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="check-in">Check-in</label>
              <input type="date" id="check-in" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="check-out">Check-out</label>
              <input type="date" id="check-out" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="guests">Guests</label>
              <select id="guests" required aria-required="true">
                <option value="1">1 Guest</option>
                <option value="2" selected>2 Guests</option>
                <option value="3">3 Guests</option>
                <option value="4">4 Guests</option>
                <option value="5">5+ Guests</option>
              </select>
            </div>
            <div class="form-group">
              <label for="price-range">Price Range</label>
              <select id="price-range">
                <option value="all">Any Price</option>
                <option value="0-100">Under 100 SAR</option>
                <option value="100-300">100-300 SAR</option>
                <option value="300-500">300-500 SAR</option>
                <option value="500-1000">500-1000 SAR</option>
                <option value="1000+">Over 1000 SAR</option>
              </select>
            </div>
            <div class="form-group">
              <label for="min-rating">Minimum Rating</label>
              <select id="min-rating">
                <option value="0">Any Rating</option>
                <option value="3">3+ Stars</option>
                <option value="4">4+ Stars</option>
                <option value="4.5">4.5+ Stars</option>
              </select>
            </div>
            <div class="form-group">
              <label for="amenities">Amenities</label>
              <select id="amenities" multiple>
                <option value="wifi">Free WiFi</option>
                <option value="parking">Free Parking</option>
                <option value="pool">Swimming Pool</option>
                <option value="gym">Fitness Center</option>
                <option value="breakfast">Free Breakfast</option>
              </select>
            </div>
            <button type="submit" class="search-button">
              <i class="fas fa-search"></i> Search
            </button>
          </form>

          <form
            class="search-form"
            id="restaurant-search"
            role="tabpanel"
            aria-labelledby="restaurants"
            style="display: none;"
          >
            <div class="form-group">
              <label for="restaurant-destination">Destination</label>
              <input
                type="text"
                id="restaurant-destination"
                placeholder="City or region"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="restaurant-date">Date</label>
              <input type="date" id="restaurant-date" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="restaurant-guests">Guests</label>
              <select id="restaurant-guests" required aria-required="true">
                <option value="1">1 Guest</option>
                <option value="2" selected>2 Guests</option>
                <option value="3">3 Guests</option>
                <option value="4">4 Guests</option>
                <option value="5">5+ Guests</option>
              </select>
            </div>
            <div class="form-group">
              <label for="restaurant-price-range">Price Range</label>
              <select id="restaurant-price-range">
                <option value="all">Any Price</option>
                <option value="0-100">Under 100 SAR</option>
                <option value="100-300">100-300 SAR</option>
                <option value="300-500">300-500 SAR</option>
                <option value="500-1000">500-1000 SAR</option>
                <option value="1000+">Over 1000 SAR</option>
              </select>
            </div>
            <div class="form-group">
              <label for="restaurant-min-rating">Minimum Rating</label>
              <select id="restaurant-min-rating">
                <option value="0">Any Rating</option>
                <option value="3">3+ Stars</option>
                <option value="4">4+ Stars</option>
                <option value="4.5">4.5+ Stars</option>
              </select>
            </div>
            <div class="form-group">
              <label for="restaurant-categories">Categories</label>
              <select id="restaurant-categories" multiple>
                <option value="arabic">Arabic</option>
                <option value="international">International</option>
                <option value="seafood">Seafood</option>
                <option value="steakhouse">Steakhouse</option>
                <option value="vegetarian">Vegetarian</option>
              </select>
            </div>
            <button type="submit" class="search-button">
              <i class="fas fa-search"></i> Search
            </button>
          </form>

          <form
            class="search-form"
            id="car-search"
            role="tabpanel"
            aria-labelledby="cars"
            style="display: none;"
          >
            <div class="form-group">
              <label for="car-destination">Pickup Location</label>
              <input
                type="text"
                id="car-destination"
                placeholder="City or region"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="car-pickup-date">Pickup Date</label>
              <input type="date" id="car-pickup-date" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="car-dropoff-date">Dropoff Date</label>
              <input type="date" id="car-dropoff-date" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="car-price-range">Price Range</label>
              <select id="car-price-range">
                <option value="all">Any Price</option>
                <option value="0-100">Under 100 SAR</option>
                <option value="100-300">100-300 SAR</option>
                <option value="300-500">300-500 SAR</option>
                <option value="500-1000">500-1000 SAR</option>
                <option value="1000+">Over 1000 SAR</option>
              </select>
            </div>
            <div class="form-group">
              <label for="car-min-rating">Minimum Rating</label>
              <select id="car-min-rating">
                <option value="0">Any Rating</option>
                <option value="3">3+ Stars</option>
                <option value="4">4+ Stars</option>
                <option value="4.5">4.5+ Stars</option>
              </select>
            </div>
            <button type="submit" class="search-button">
              <i class="fas fa-search"></i> Search
            </button>
          </form>

          <form
            class="search-form"
            id="event-search"
            role="tabpanel"
            aria-labelledby="events"
            style="display: none;"
          >
            <div class="form-group">
              <label for="event-destination">Destination</label>
              <input
                type="text"
                id="event-destination"
                placeholder="City or region"
                required
                aria-required="true"
              />
            </div>
            <div class="form-group">
              <label for="event-date">Date</label>
              <input type="date" id="event-date" required aria-required="true" />
            </div>
            <div class="form-group">
              <label for="event-tickets">Tickets</label>
              <select id="event-tickets" required aria-required="true">
                <option value="1">1 Ticket</option>
                <option value="2" selected>2 Tickets</option>
                <option value="3">3 Tickets</option>
                <option value="4">4 Tickets</option>
                <option value="5">5+ Tickets</option>
              </select>
            </div>
            <div class="form-group">
              <label for="event-price-range">Price Range</label>
              <select id="event-price-range">
                <option value="all">Any Price</option>
                <option value="0-100">Under 100 SAR</option>
                <option value="100-300">100-300 SAR</option>
                <option value="300-500">300-500 SAR</option>
                <option value="500-1000">500-1000 SAR</option>
                <option value="1000+">Over 1000 SAR</option>
              </select>
            </div>
            <div class="form-group">
              <label for="event-categories">Categories</label>
              <select id="event-categories" multiple>
                <option value="concert">Concerts</option>
                <option value="sports">Sports</option>
                <option value="cultural">Cultural</option>
                <option value="festival">Festivals</option>
                <option value="family">Family</option>
              </select>
            </div>
            <button type="submit" class="search-button">
              <i class="fas fa-search"></i> Search
            </button>
          </form>

            <div id="search-results" class="search-results">
        <h3>Search Results for <span id="search-location">Riyadh</span></h3>
        <p id="search-dates">
          Showing results for <span id="check-in-date">today</span> to
          <span id="check-out-date">tomorrow</span>
        </p>
        <div
          class="results-grid"
          id="results-container"
          role="region"
          aria-live="polite"
        >
          <!-- Results will be dynamically inserted here -->
        </div>
    </div>
        </div>
      </section>

      <section
        id="ai"
        class="ai-assistant section"
        aria-labelledby="ai-assistant-title"
      >
        <h2 id="ai-assistant-title" class="section-title">
          AI Travel Assistant
        </h2>
        <p class="section-text">
          Don't know where to start? Our AI assistant can help plan your perfect
          trip based on your preferences and budget.
        </p>

        <div class="ai-container">
          <div class="ai-header">
            <div class="ai-icon">
              <img
                src="./images/DALL·E 2025-03-23 06.35.39 - A cartoon-style robot wearing a traditional Saudi gutra (headscarf), sitting and working on a laptop. The robot has a friendly appearance and is focus.webp"
                style="
                  width: 70px;
                  height: 70px;
                  border-radius: 50px;
                  margin-bottom: 15px;
                "
              />
            </div>
            <div>
              <h3>Saudi Guider AI Assistant</h3>
              <p>
                Ask me anything about traveling in Saudi Arabia or tell me what
                you're looking for.
              </p>
            </div>
          </div>

          <div class="ai-content">
            <div class="ai-input">
              <textarea
                id="ai-query"
                placeholder="Example: I want to plan a 5-day trip to Riyadh and Jeddah for a family of 4 with a budget of $3000."
                aria-label="Enter your travel question or request"
              ></textarea>
              <button
                class="ai-submit"
                id="ai-submit-btn"
                aria-label="Submit your question"
              >
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>

            <div>
              <p><strong>Try these example prompts:</strong></p>
              <div class="ai-example-prompts">
                <span class="example-prompt" tabindex="0" role="button">
                  Best restaurants in Al-Ula for dinner
                </span>
                <span class="example-prompt" tabindex="0" role="button">
                  Family-friendly activities in Riyadh
                </span>
                <span class="example-prompt" tabindex="0" role="button">
                  Luxury hotels with pool in Jeddah
                </span>
                <span class="example-prompt" tabindex="0" role="button">
                  Weekend getaway with cultural experiences
                </span>
              </div>
            </div>

            <div
              id="ai-results"
              class="ai-results"
              role="region"
              aria-live="polite"
            >
              <!-- AI results will be displayed here -->
            </div>

            <div class="map-container">
              <div class="map-placeholder">
                <p>AI suggestions will appear on the map here</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Service Detail Modals -->
      <!-- Hotel Details Modal -->
      <div
        id="hotelModal"
        class="modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="hotelModalTitle"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="hotelModalTitle" class="modal-title">
              Luxury Hotel Bookings
            </h3>
            <button class="close-modal" aria-label="Close modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-details">
              <div class="modal-info">
                <h4>Service Details</h4>
                <p>
                  Our hotel booking service provides access to the finest
                  accommodations across Saudi Arabia, from boutique hotels to
                  luxury resorts. With Saudi Guider, you'll enjoy exclusive
                  member rates and special amenities.
                </p>

                <h4>Price Information</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Economy:
                    $80-150/night
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Premium:
                    $150-300/night
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Luxury:
                    $300-800+/night
                  </li>
                  <li>
                    <i class="fas fa-tag"></i> Members receive up to a 15%
                    discount
                  </li>
                </ul>
              </div>

              <div class="modal-features">
                <h4>Features & Benefits</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-star"></i> Access to over 500 premium
                    hotels throughout Saudi Arabia
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Best price guarantee and price
                    match policy
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Exclusive room upgrades when
                    available
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Special welcome amenities at
                    partner hotels
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Flexible cancellation policies
                  </li>
                  <li>
                    <i class="fas fa-star"></i> 24/7 customer support for all
                    bookings
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Earn loyalty points with every
                    booking
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="auth-button">Book Now</button>
          </div>
        </div>
      </div>

      <!-- Car Rental Details Modal -->
      <div
        id="carModal"
        class="modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="carModalTitle"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="carModalTitle" class="modal-title">Premium Car Rentals</h3>
            <button class="close-modal" aria-label="Close modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-details">
              <div class="modal-info">
                <h4>Service Details</h4>
                <p>
                  Our car rental service provides well-maintained vehicles from
                  trusted providers across Saudi Arabia. From economy cars to
                  luxury SUVs, we have options for every need and budget. All
                  rentals include comprehensive insurance.
                </p>

                <h4>Price Information</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Economy: $40-75/day
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Mid-size: $75-150/day
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Luxury: $150-300+/day
                  </li>
                  <li>
                    <i class="fas fa-tag"></i> Weekly rental discounts up to 25%
                  </li>
                </ul>
              </div>

              <div class="modal-features">
                <h4>Features & Benefits</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-star"></i> Wide range of vehicles from
                    economy to luxury
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Flexible pickup and drop-off
                    locations
                  </li>
                  <li><i class="fas fa-star"></i> No hidden fees or charges</li>
                  <li>
                    <i class="fas fa-star"></i> Comprehensive insurance included
                  </li>
                  <li>
                    <i class="fas fa-star"></i> 24/7 roadside assistance
                    throughout Saudi Arabia
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Optional GPS navigation and
                    child seats
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Fuel options and mileage
                    packages available
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="auth-button">Rent Now</button>
          </div>
        </div>
      </div>

      <!-- Restaurant Details Modal -->
      <div
        id="restaurantModal"
        class="modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="restaurantModalTitle"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="restaurantModalTitle" class="modal-title">
              Restaurant Reservations
            </h3>
            <button class="close-modal" aria-label="Close modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-details">
              <div class="modal-info">
                <h4>Service Details</h4>
                <p>
                  Discover and book the best dining experiences across Saudi
                  Arabia with our restaurant reservation service. From authentic
                  Saudi cuisine to international fine dining, we help you secure
                  tables at the most popular and exclusive restaurants.
                </p>

                <h4>Price Information</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Casual Dining: $15-40
                    per person
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Mid-range: $40-80 per
                    person
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Fine Dining: $80-200+
                    per person
                  </li>
                  <li>
                    <i class="fas fa-tag"></i> Special tasting menus available
                    at select restaurants
                  </li>
                </ul>
              </div>

              <div class="modal-features">
                <h4>Features & Benefits</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-star"></i> Access to exclusive restaurants
                    and private dining experiences
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Special Saudi Guider menu
                    options at select venues
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Priority reservations even
                    during peak times
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Dietary preferences and
                    restrictions accommodated
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Insider recommendations from
                    local food experts
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Reviews and ratings from
                    verified Saudi Guider members
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Group booking options for
                    special occasions
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="auth-button">Reserve Now</button>
          </div>
        </div>
      </div>

      <!-- Event Details Modal -->
      <div
        id="eventModal"
        class="modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="eventModalTitle"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="eventModalTitle" class="modal-title">
              Cultural & Entertainment Events
            </h3>
            <button class="close-modal" aria-label="Close modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="modal-details">
              <div class="modal-info">
                <h4>Service Details</h4>
                <p>
                  Get tickets to the most popular cultural festivals, concerts,
                  sports events, and exhibitions across Saudi Arabia. Our event
                  service provides access to both mainstream and exclusive
                  experiences, with options for every interest.
                </p>

                <h4>Price Information</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Cultural Experiences:
                    $25-75 per ticket
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Concerts & Shows:
                    $50-200+ per ticket
                  </li>
                  <li>
                    <i class="fas fa-money-bill-wave"></i> Sports Events:
                    $30-150 per ticket
                  </li>
                  <li>
                    <i class="fas fa-tag"></i> VIP packages available for select
                    events
                  </li>
                </ul>
              </div>

              <div class="modal-features">
                <h4>Features & Benefits</h4>
                <ul class="detail-list">
                  <li>
                    <i class="fas fa-star"></i> Priority access to sold-out
                    events
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Exclusive Saudi Guider member
                    discounts
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Early access to ticket sales for
                    major events
                  </li>
                  <li>
                    <i class="fas fa-star"></i> VIP upgrades and exclusive
                    experiences
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Group booking options available
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Last-minute ticket availability
                  </li>
                  <li>
                    <i class="fas fa-star"></i> Event recommendations based on
                    your preferences
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="auth-button">Get Tickets</button>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-section">
          <h3>Saudi Guider</h3>
          <p>
            Your ultimate companion for exploring Saudi Arabia with personalized
            AI assistance.
          </p>
          <div class="social-icons">
            <a href="#" aria-label="Follow us on Twitter"
              ><i class="fab fa-twitter" aria-hidden="true"></i
            ></a>
            <a
              href="https://www.instagram.com/saudi_guider?igsh=OGFoY3k0d2N5dDM="
              aria-label="Follow us on Instagram"
              ><i class="fab fa-instagram" aria-hidden="true"></i
            ></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Explore Saudi Arabia</h3>
          <ul>
            <li><a href="#popular-destinations">Popular Destinations</a></li>
            <li><a href="#travel-guides">Travel Guides</a></li>
            <li><a href="#cultural-experiences">Cultural Experiences</a></li>
            <li><a href="#travel-tips">Travel Tips</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Contact Us</h3>
          <address>
            <p>
              <i class="fas fa-map-marker-alt" aria-hidden="true"></i> Jeddah,
              Saudi Arabia
            </p>
            <p>
              <i class="fas fa-phone" aria-hidden="true"></i>
              <a href="tel:+966556294862">+966 55 629 4862</a>
            </p>
            <p>
              <i class="fas fa-envelope" aria-hidden="true"></i>
              <a href="mailto:saudiguider1@gmail.com">saudiguider1@gmail.com</a>
            </p>
          </address>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; <span id="current-year">2025</span> Saudi Guider. All rights
          reserved.
        </p>
      </div>
    </footer>

<script>
    // Helper function to safely get elements
    function getElement(id) {
        const el = document.getElementById(id);
        if (!el) {
            console.warn(`Element with ID ${id} not found`);
            return null;
        }
        return el;
    }

    document.addEventListener("DOMContentLoaded", function () {
        // Set current year in footer
        const currentYearEl = getElement("current-year");
        if (currentYearEl) {
            currentYearEl.textContent = new Date().getFullYear();
        }

        // Check if user is logged in
        const token = localStorage.getItem('token');
        const authButtons = document.querySelector('.auth-buttons');
        const userDropdown = getElement('userDropdown');
        const usernameDisplay = getElement('usernameDisplay');

        if (token) {
            if (authButtons) authButtons.style.display = 'none';
            if (userDropdown) userDropdown.style.display = 'block';
            if (usernameDisplay) usernameDisplay.textContent = 'User';
        }

        // Mobile navigation toggle
        const mobileToggle = document.querySelector(".mobile-nav-toggle");
        const nav = getElement("main-nav");

        if (mobileToggle && nav) {
            mobileToggle.addEventListener("click", function () {
                const isExpanded = nav.classList.toggle("active");
                mobileToggle.setAttribute("aria-expanded", isExpanded);
            });
        }

        // Close mobile nav when clicking on a link
        document.querySelectorAll("nav a").forEach((link) => {
            link.addEventListener("click", () => {
                if (nav) nav.classList.remove("active");
                if (mobileToggle) mobileToggle.setAttribute("aria-expanded", "false");
            });
        });

        // Search tabs functionality
        const tabs = document.querySelectorAll(".search-tab");
        const searchForms = {
            hotels: getElement("hotel-search"),
            restaurants: getElement("restaurant-search"),
            cars: getElement("car-search"),
            events: getElement("event-search")
        };
        const resultsContainer = getElement("results-container");

        if (tabs.length > 0) {
            tabs.forEach((tab) => {
                tab.addEventListener("click", function () {
                    // Update tab states
                    tabs.forEach((t) => {
                        t.classList.remove("active");
                        t.setAttribute("aria-selected", "false");
                    });
                    this.classList.add("active");
                    this.setAttribute("aria-selected", "true");

                    // Hide all search forms first
                    Object.values(searchForms).forEach(form => {
                        if (form) form.style.display = "none";
                    });

                    // Show the selected search form
                    const tabType = this.getAttribute("data-tab");
                    if (searchForms[tabType]) {
                        searchForms[tabType].style.display = "flex";
                    }
                });
            });
        }

        // Service type mapping (frontend to backend)
        const typeMap = {
            'hotels': 'hotel',
            'restaurants': 'restaurant',
            'cars': 'car',
            'events': 'event'
        };

        // Search form submission handler for all forms
        Object.values(searchForms).forEach(form => {
            if (form) {
                form.addEventListener("submit", async function (e) {
                    e.preventDefault();
                    
                    // Get active tab
                    const activeTab = document.querySelector(".search-tab.active")?.getAttribute("data-tab");
                    if (!activeTab) return;
                    
                    const serviceType = typeMap[activeTab];
                    
                    // Get form values based on active tab
                    let destination, checkIn, checkOut, guests, priceRange, minRating, filters;
                    
                    switch(activeTab) {
                        case 'hotels':
                            destination = getElement("destination")?.value;
                            checkIn = getElement("check-in")?.value;
                            checkOut = getElement("check-out")?.value;
                            guests = getElement("guests")?.value;
                            priceRange = getElement("price-range")?.value;
                            minRating = getElement("min-rating")?.value;
                            filters = Array.from(getElement("amenities")?.selectedOptions || []).map(o => o.value);
                            break;
                        case 'restaurants':
                            destination = getElement("restaurant-destination")?.value;
                            checkIn = getElement("restaurant-date")?.value;
                            guests = getElement("restaurant-guests")?.value;
                            priceRange = getElement("restaurant-price-range")?.value;
                            minRating = getElement("restaurant-min-rating")?.value;
                            filters = Array.from(getElement("restaurant-categories")?.selectedOptions || []).map(o => o.value);
                            break;
                        case 'cars':
                            destination = getElement("car-destination")?.value;
                            checkIn = getElement("car-pickup-date")?.value;
                            checkOut = getElement("car-dropoff-date")?.value;
                            priceRange = getElement("car-price-range")?.value;
                            minRating = getElement("car-min-rating")?.value;
                            break;
                        case 'events':
                            destination = getElement("event-destination")?.value;
                            checkIn = getElement("event-date")?.value;
                            guests = getElement("event-tickets")?.value;
                            priceRange = getElement("event-price-range")?.value;
                            filters = Array.from(getElement("event-categories")?.selectedOptions || []).map(o => o.value);
                            break;
                    }

                    try {
                        // Show loading state
                        const searchResults = getElement("search-results");
                        if (searchResults) {
                            searchResults.innerHTML = 
                                '<div class="loading-spinner"><i class="fas fa-spinner fa-spin"></i> Searching...</div>';
                            searchResults.classList.add("active");
                        }

                        // Build query parameters
                        const params = new URLSearchParams();
                        params.append('type', serviceType);
                        
                        if (destination) params.append('search', destination);
                        if (priceRange && priceRange !== 'all') params.append('priceRange', priceRange);
                        if (minRating && minRating !== '0') params.append('minRating', minRating);
                        
                        // Add filters based on service type
                        switch (activeTab) {
                            case 'hotels':
                                if (checkIn) params.append('checkIn', checkIn);
                                if (checkOut) params.append('checkOut', checkOut);
                                if (guests) params.append('capacity', guests);
                                if (filters.length) params.append('amenities', filters.join(','));
                                break;
                            case 'restaurants':
                                if (checkIn) params.append('date', checkIn);
                                if (guests) params.append('capacity', guests);
                                if (filters.length) params.append('categories', filters.join(','));
                                break;
                            case 'cars':
                                if (checkIn) params.append('startDate', checkIn);
                                if (checkOut) params.append('endDate', checkOut);
                                break;
                            case 'events':
                                if (checkIn) params.append('date', checkIn);
                                if (guests) params.append('capacity', guests);
                                if (filters.length) params.append('categories', filters.join(','));
                                break;
                        }

                        // Make API call to backend
                        const response = await fetch(`https://saudiguiderbackend.onrender.com/api/services/search?${params}`);
                        const data = await response.json();

                        if (!response.ok) {
                            throw new Error(data.message || 'Failed to fetch results');
                        }

                        // Update search results location and dates
                        const searchLocation = getElement("search-location");
                        if (searchLocation) searchLocation.textContent = destination || "Riyadh";

                        const checkInDate = checkIn
                            ? new Date(checkIn).toLocaleDateString()
                            : "today";
                        const checkOutDate = checkOut
                            ? new Date(checkOut).toLocaleDateString()
                            : "tomorrow";

                        const checkInDateEl = getElement("check-in-date");
                        const checkOutDateEl = getElement("check-out-date");
                        if (checkInDateEl) checkInDateEl.textContent = checkInDate;
                        if (checkOutDateEl) checkOutDateEl.textContent = checkOutDate;

                        // Display results with sorting options
                        displaySearchResults(data.data, activeTab);
                        
                    } catch (error) {
                        console.error('Search error:', error);
                        const searchResults = getElement("search-results");
                        if (searchResults) {
                            searchResults.innerHTML = `
                                <div class="error-message">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <p>${error.message || 'Failed to load search results. Please try again.'}</p>
                                </div>
                            `;
                        }
                    }
                });
            }
        });

        /**
         * Displays search results in the results container with sorting options
         * @param {Array} services - Array of service objects
         * @param {string} type - Type of service (hotels, restaurants, cars, events)
         */
        function displaySearchResults(services, type) {
            const resultsContainer = getElement("results-container");
            if (!resultsContainer) return;

            resultsContainer.innerHTML = '';

            // Add sorting controls
            const sortControls = document.createElement('div');
            sortControls.className = 'sort-controls';
            sortControls.innerHTML = `
                <div class="sort-options">
                    <label for="sort-by">Sort by:</label>
                    <select id="sort-by">
                        <option value="recommended">Recommended</option>
                        <option value="price-low">Price (Low to High)</option>
                        <option value="price-high">Price (High to Low)</option>
                        <option value="rating">Rating</option>
                        <option value="name">Name (A-Z)</option>
                    </select>
                </div>
                <div class="results-count">${services?.length || 0} results found</div>
            `;
            resultsContainer.appendChild(sortControls);

            // Create results grid container
            const resultsGrid = document.createElement('div');
            resultsGrid.className = 'results-grid';
            resultsContainer.appendChild(resultsGrid);

            if (!services || services.length === 0) {
                resultsGrid.innerHTML = `
                    <div class="no-results-message">
                        <i class="fas fa-search"></i>
                        <h4>No ${type} found matching your criteria</h4>
                        <p>Try adjusting your search filters</p>
                    </div>
                `;
                return;
            }

            // Add event listener for sorting
            const sortBy = sortControls.querySelector('#sort-by');
            if (sortBy) {
                sortBy.addEventListener('change', function() {
                    sortResults(services, type, this.value);
                });
            }

            // Display initial sorted results
            sortResults(services, type, 'recommended');
        }

        /**
         * Sorts and displays results based on selected option
         * @param {Array} services - Array of service objects
         * @param {string} type - Type of service
         * @param {string} sortBy - Sorting criteria
         */
        function sortResults(services, type, sortBy) {
            const resultsContainer = getElement("results-container");
            if (!resultsContainer) return;
            
            const resultsGrid = resultsContainer.querySelector('.results-grid');
            if (!resultsGrid) return;
            
            // Clear existing results (keep sort controls)
            resultsGrid.innerHTML = '';

            // Sort services
            let sortedServices = [...services];
            switch (sortBy) {
                case 'price-low':
                    sortedServices.sort((a, b) => (a.price || 0) - (b.price || 0));
                    break;
                case 'price-high':
                    sortedServices.sort((a, b) => (b.price || 0) - (a.price || 0));
                    break;
                case 'rating':
                    sortedServices.sort((a, b) => (b.rating || 0) - (a.rating || 0));
                    break;
                case 'name':
                    sortedServices.sort((a, b) => (a.title || '').localeCompare(b.title || ''));
                    break;
                default:
                    // Recommended sorting (default)
                    sortedServices.sort((a, b) => {
                        // Prioritize featured items first
                        if (a.featured !== b.featured) return (b.featured ? 1 : 0) - (a.featured ? 1 : 0);
                        // Then by rating
                        return (b.rating || 0) - (a.rating || 0);
                    });
            }

            // Display sorted results
            sortedServices.forEach(service => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                
                // Determine price display based on service type
                let priceDisplay;
                if (type === 'hotels') {
                    priceDisplay = `From ${service.price || 0} SAR/night`;
                } else if (type === 'restaurants') {
                    priceDisplay = `Average meal: ${service.price || 0} SAR`;
                } else if (type === 'cars') {
                    priceDisplay = `From ${service.price || 0} SAR/day`;
                } else {
                    priceDisplay = `From ${service.price || 0} SAR`;
                }

                // Build stars for rating
                const rating = service.rating || 0;
                const fullStars = Math.floor(rating);
                const halfStar = rating % 1 >= 0.5 ? 1 : 0;
                const emptyStars = 5 - fullStars - halfStar;
                
                let stars = '';
                stars += '<i class="fas fa-star"></i>'.repeat(fullStars);
                stars += '<i class="fas fa-star-half-alt"></i>'.repeat(halfStar);
                stars += '<i class="far fa-star"></i>'.repeat(emptyStars);

                // Build amenities list
                const amenitiesList = service.amenities?.slice(0, 3).map(amenity => 
                    `<span class="amenity-tag">${amenity}</span>`
                ).join('') || '';

                resultItem.innerHTML = `
                    <div class="result-image">
                        <img src="${service.imageUrl || './images/default-service.jpg'}" 
                            alt="${service.title || 'Service'}" loading="lazy">
                        ${service.featured ? '<span class="featured-badge">Featured</span>' : ''}
                    </div>
                    <h4>${service.title || 'Untitled Service'}</h4>
                    <p class="location"><i class="fas fa-map-marker-alt"></i> ${service.location || 'Location not specified'}</p>
                    <div class="result-rating">
                        ${stars}
                        <span>${rating.toFixed(1)} (${service.reviewCount || 0} reviews)</span>
                    </div>
                    <p class="result-price">${priceDisplay}</p>
                    ${amenitiesList ? `<div class="amenities">${amenitiesList}</div>` : ''}
                    <p class="description">${service.description?.substring(0, 100) || 'No description available'}...</p>
                    <div class="result-actions">
                        <button class="result-button book-result-btn" data-id="${service._id}" data-type="${typeMap[type]}">
                            ${type === 'restaurants' ? 'Reserve' : 
                                type === 'cars' ? 'Rent Now' : 
                                type === 'events' ? 'Get Tickets' : 'Book Now'}
                        </button>
                    </div>
                `;

                // Add event listener to the book button
                const bookBtn = resultItem.querySelector('.book-result-btn');
                if (bookBtn) {
                    bookBtn.addEventListener('click', function() {
                        bookService(service._id, this.getAttribute('data-type'));
                    });
                }

                resultsGrid.appendChild(resultItem);
            });
        }

        /**
         * Books a service by making an API call to the backend
         * @param {string} serviceId - ID of the service to book
         * @param {string} serviceType - Type of service (hotel, restaurant, car, event)
         */
        async function bookService(serviceId, serviceType) {
            const token = localStorage.getItem('token');
            
            if (!token) {
                const action = serviceType === 'restaurant' ? 'make a reservation' :
                            serviceType === 'car' ? 'rent a car' :
                            serviceType === 'event' ? 'purchase tickets' : 'book accommodation';
                showLoginMessage(action);
                return;
            }

            try {
                // Get dates based on service type
                let startDate, endDate;
                if (serviceType === 'hotel') {
                    startDate = getElement("check-in")?.value;
                    endDate = getElement("check-out")?.value;
                } else if (serviceType === 'car') {
                    startDate = getElement("car-pickup-date")?.value;
                    endDate = getElement("car-dropoff-date")?.value;
                }

                const response = await fetch('https://saudiguiderbackend.onrender.com/api/bookings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ 
                        serviceId,
                        serviceType,
                        ...(startDate && { startDate }),
                        ...(endDate && { endDate })
                    })
                });
                
                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.message || 'Booking failed');
                }

                showBookingSuccess(serviceId);
            } catch (error) {
                console.error('Booking error:', error);
                showBookingError(error.message || 'Failed to complete booking');
            }
        }

        /**
         * Shows a success message after booking
         * @param {string} serviceId - ID of the booked service
         */
        function showBookingSuccess(serviceId) {
            const modal = document.createElement('div');
            modal.className = 'booking-success-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <i class="fas fa-check-circle"></i>
                    <h3>Booking Confirmed!</h3>
                    <p>Your reservation has been successfully created.</p>
                    <div class="modal-actions">
                        <button onclick="window.location.href='reservations.html'">
                            View My Reservations
                        </button>
                        <button onclick="this.closest('.booking-success-modal').remove()">
                            Continue Browsing
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        /**
         * Shows an error message when booking fails
         * @param {string} message - Error message to display
         */
        function showBookingError(message) {
            const modal = document.createElement('div');
            modal.className = 'booking-success-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <i class="fas fa-exclamation-circle" style="color: #ff5252;"></i>
                    <h3>Booking Failed</h3>
                    <p>${message}</p>
                    <div class="modal-actions">
                        <button onclick="this.closest('.booking-success-modal').remove()">
                            OK
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        /**
         * Shows login message when user tries to book without being logged in
         * @param {string} action - The action requiring login (e.g., "book accommodation")
         */
        function showLoginMessage(action) {
            const loginMessage = document.createElement("div");
            loginMessage.className = "login-message";
            loginMessage.innerHTML = `
                <div class="login-message-content">
                    <p>Please login to ${action}.</p>
                    <button onclick="window.location.href='login.html'" class="login-redirect-btn">
                        Go to Login Page
                    </button>
                </div>
            `;
            document.body.appendChild(loginMessage);

            // Close when clicking outside
            loginMessage.addEventListener("click", function (e) {
                if (e.target === loginMessage) {
                    loginMessage.remove();
                }
            });
        }

        // Set default dates for hotel search
        const today = new Date();
        const tomorrow = new Date();
        tomorrow.setDate(today.getDate() + 1);

        // Format dates for input fields (YYYY-MM-DD)
        const formatDate = (date) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, "0");
            const day = String(date.getDate()).padStart(2, "0");
            return `${year}-${month}-${day}`;
        };

        const checkIn = getElement("check-in");
        const checkOut = getElement("check-out");
        const restaurantDate = getElement("restaurant-date");
        const carPickupDate = getElement("car-pickup-date");
        const carDropoffDate = getElement("car-dropoff-date");
        const eventDate = getElement("event-date");

        if (checkIn) {
            checkIn.value = formatDate(today);
            checkIn.min = formatDate(today);
        }
        if (checkOut) {
            checkOut.value = formatDate(tomorrow);
            checkOut.min = formatDate(tomorrow);
        }
        if (restaurantDate) restaurantDate.value = formatDate(today);
        if (carPickupDate) carPickupDate.value = formatDate(today);
        if (carDropoffDate) carDropoffDate.value = formatDate(tomorrow);
        if (eventDate) eventDate.value = formatDate(today);

        // Update min date for check-out when check-in changes
        if (checkIn) {
            checkIn.addEventListener("change", function() {
                if (checkOut) checkOut.min = this.value;
            });
        }

        // Add login requirement for all booking buttons in modals
        document.querySelectorAll(".modal-footer button").forEach((button) => {
            button.addEventListener("click", function () {
                const modal = this.closest(".modal");
                if (!modal) return;
                
                const action = modal.id.includes("hotel")
                    ? "book accommodation"
                    : modal.id.includes("car")
                    ? "rent a car"
                    : modal.id.includes("restaurant")
                    ? "make a reservation"
                    : "purchase tickets";
                showLoginMessage(action);
            });
        });

        // Add login requirement for featured service booking buttons
        document.querySelectorAll(".book-now-btn").forEach((button) => {
            button.addEventListener("click", function () {
                const card = this.closest(".service-card");
                if (!card) return;
                
                const service = card.querySelector("h3")?.textContent || 'this service';
                showLoginMessage(`book ${service}`);
            });
        });

        // Logout functionality
        const logoutBtn = getElement('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('token');
                window.location.href = 'index.html';
            });
        }

        // AI Assistant functionality
    const aiSubmitBtn = getElement('ai-submit-btn');
    if (aiSubmitBtn) {
        aiSubmitBtn.addEventListener('click', async function() {
            const query = getElement('ai-query')?.value.trim();
            const aiResults = getElement('ai-results');

            if (!query || !aiResults) return;

            try {
                // Show loading state
                aiResults.innerHTML = '<div class="ai-loading"><i class="fas fa-spinner"></i></div>';
                aiResults.classList.add('active');

                const token = localStorage.getItem('token');
                if (!token) {
                    throw new Error("Please login to use the AI service.");
                }

                // Make API call to backend AI endpoint
                const response = await fetch('https://saudiguiderbackend.onrender.com/api/bookings/ai', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`,
                    },
                    body: JSON.stringify({ prompt: query }),
                });

                if (!response.ok) {
                    throw new Error(`AI service error: ${response.statusText}`);
                }

                const data = await response.json();

                // Display AI response
                displayAIResponse(data);
            } catch (error) {
                console.error('AI error:', error);
                aiResults.innerHTML = `<div class="error-message">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <p>${error.message || 'Failed to get AI response. Please try again.'}</p>
                                        </div>`;
            }
        });
    }

        /**
         * Displays the AI response in the results section
         * @param {Object} data - Response data from the AI endpoint
         */
         function displayAIResponse(data) {
        const aiResults = getElement('ai-results');
        if (!aiResults) return;

        aiResults.innerHTML = `
            <div class="ai-response">
                <h3>Travel Recommendations</h3>
                <p>${data.reply || 'No response from AI assistant.'}</p>
            </div>
        `;


                // Create cards for each service in the plan
                data.plan?.forEach(item => {
                    if (!item?.service) return;
                    
                    const card = document.createElement('div');
                    card.className = 'trip-card';
                    
                    let priceDisplay;
                    if (item.service.type === 'hotel') {
                        priceDisplay = `From ${item.service.price || 0} SAR/night`;
                    } else if (item.service.type === 'restaurant') {
                        priceDisplay = `Average meal: ${item.service.price || 0} SAR`;
                    } else if (item.service.type === 'car') {
                        priceDisplay = `From ${item.service.price || 0} SAR/day`;
                    } else {
                        priceDisplay = `From ${item.service.price || 0} SAR`;
                    }

                    card.innerHTML = `
                        <h3>${item.type}: ${item.service.title || 'Untitled Service'}</h3>
                        <p>${item.service.description || 'No description available'}</p>
                        <p>Location: ${item.service.location || 'Location not specified'}</p>
                        <p>Price: ${priceDisplay}</p>
                        <button data-id="${item.service._id}" data-type="${item.service.type}">Reserve</button>
                    `;

                    // Add click handler to reserve button
                    const reserveBtn = card.querySelector('button');
                    if (reserveBtn) {
                        reserveBtn.addEventListener('click', function() {
                            bookService(item.service._id, this.getAttribute('data-type'));
                        });
                    }

                    aiResults.appendChild(card);
                });
            } else {
                // Display text response
                aiResults.innerHTML = `
                    <div class="ai-response">
                        <h3>Travel Recommendations</h3>
                        <p>${data.reply || 'No response from AI assistant.'}</p>
                    </div>
                `;
            }

            // Scroll to results
        aiResults.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Example prompts click handler
        document.querySelectorAll('.example-prompt').forEach((prompt) => {
            prompt.addEventListener('click', function() {
                const aiQuery = getElement('ai-query');
                if (aiQuery) {
                    aiQuery.value = this.textContent;
                    aiQuery.focus();
                }
            });

            // Add keyboard support for example prompts
            prompt.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const aiQuery = getElement('ai-query');
                    if (aiQuery) {
                        aiQuery.value = this.textContent;
                        aiQuery.focus();
                    }
                }
            });
        });

        // View details button handlers for service cards
        document.querySelectorAll('.view-details-btn').forEach(button => {
            button.addEventListener('click', function() {
                const serviceType = this.getAttribute('data-service');
                if (!serviceType) return;
                
                const modalId = `${serviceType}Modal`;
                const modal = getElement(modalId);
                if (modal) modal.style.display = 'flex';
            });
        });

        // Close modal buttons
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', function() {
                const modal = this.closest('.modal');
                if (modal) modal.style.display = 'none';
            });
        });

        // Close modals when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
        });
    });
    </script>
  </body>
</html>
